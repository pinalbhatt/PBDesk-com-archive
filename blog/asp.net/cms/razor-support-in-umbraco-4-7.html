<!DOCTYPE html>
<!--[if IE 7]>
<html class="no-js ie7 oldie" lang="en-US"> <![endif]-->
<!--[if IE 8]>
<html class="no-js ie8 oldie" lang="en-US"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en">
<head>
    <meta charset="utf-8">

<!-- TITLE OF SITE-->
<title> PBDesk.com </title>

<!-- META TAG -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="CV, Portfolio, Resume">
<meta name="author" content="Pinal Bhatt">

<!-- FAVICON -->
<link rel="icon" href="/assets/material/images/favicon.ico">
<link rel="apple-touch-icon" sizes="72x72" href="/assets/material/images/apple-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/assets/material/images/apple-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/assets/material/images/apple-icon-114x114.png">

<!-- ========================================
        Stylesheets
==========================================-->

<!-- MATERIALIZE CORE CSS -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/css/materialize.min.css">
<link rel="stylesheet" href="/assets/material/css/animate.css">
<link href='http://fonts.googleapis.com/css?family=Roboto:400,100,300,700,400italic,700 italic' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css">
<link href="/assets/material/css/style.css" rel="stylesheet">
<link href="/assets/material/css/responsive.css" rel="stylesheet">

<!-- COLORS: red lime purple orange green  -->
<link rel="stylesheet" href="/assets/material/css/colors/red.css" title="lime">
<link href="/css/main.css" rel="stylesheet">

<!--[if lt IE 9]><script src="/assets/material/js/ie8-responsive-file-warning.js"></script><![endif] -->
<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
<![endif]-->

</head>
<body>
<div class="container">
    <div class="row">
        <aside class="col l4 m12 s12 sidebar z-depth-1" id="sidebar">
            <div class="row">
                <div class="heading">
    <!-- ======================================
              IMAGE
    =========================================-->
    <div class="feature-img hide-on-med-and-down">
        <a title="GoTo Home" href="/"><img src="/assets/material/images/profile-img.jpg" class="responsive-img" alt=""></a>
    </div>
    <!-- =========================================
               NAVIGATION
    ==========================================-->
    <div class=" nav-icon">
        <nav>
            <div class="nav-wrapper">
                <ul id="nav-mobile" class="side-nav">
                    <li><a href="/"><i class="fa fa-home"></i> Home</a></li>
                    <li><a href="/blog"><i class="fa fa-file-text-o"></i> My Posts</a></a></li>
                    <li><a href="/gists"><i class="fa fa-file-code-o"></i> Gists</a></a></li>
                    <li><a href="/ebooks"><i class="fa fa-book"></i> eBooks</a></a></li>
                    <li><a href="tutorials"><i class="fa fa-laptop"></i> Tutorials</a></a></li>
                    <li><a href="http://cv.PBDesk.com" target="_blank"><i class="fa fa-graduation-cap"></i> My Resume</a></a></li>
                    <li><a href="/about"><i class="fa fa-user-secret"></i> About Me</a></a></li>
                    <li><a href="about/contact-me"><i class="fa fa-send"></i> Contat Me</a></a></li>
                    <li><a href="http://roken.pbdesk.com" target="_blank"><i class="fa fa-rocket"></i> RoKen</a></a></li>
                    <li><a href="http://kenken.pbdesk.io" target="_blank"><i class="fa fa-th"></i> KenKen</a></a></li>

                </ul>
                <a href="#" data-activates="nav-mobile" class="button-collapse  "><i class="mdi-navigation-menu"></i></a>
            </div>
        </nav>
    </div>
    <!-- ========================================
               NAME AND TAGLINE
    ==========================================-->
    <div class="title col s12 m12 l9 right  wow fadeIn hide-on-med-and-down" data-wow-delay="0.1s">
        <h2>Pinal Bhatt's Blog</h2> <!-- title name -->
        <h5>Learning endeavor for ever...</h5>  <!-- tagline -->
    </div>

    <div class="col l12 m12 s12  mobile sidebar-item hide-on-large-only">
        <div class="row">
            <div class="col m12 s12 l12 info wow fadeIn a2" style="border-bottom: none !important;" data-wow-delay="0.2s" >
                <div class="section-item-details" style="padding-top: 15px">
                    <div class="aboutMe">
                        <h4><a title="GoTo Home" href="/">Pinal Bhatt's Blog</a></h4>
                        <span>Learning endeavor for ever... </span>
                    </div>
                    <div class="work">
    <div class="social1">
        <a target="_blank"  href="http://twitter.com/PBDesk">
            <i class="fa fa-twitter"></i>
        </a>
        <a target="_blank"  href="https://www.facebook.com/Go.PBDesk">
            <i class="fa fa-facebook"></i>
        </a>
        <a target="_blank"  href="https://plus.google.com/+Pbdesk">
            <i class="fa fa-google-plus"></i>
        </a>
        <a target="_blank"  href="http://www.linkedin.com/in/pinalbhatt">
            <i class="fa fa-linkedin"></i>
        </a>
        <a target="_blank"  href="https://github.com/PBDesk">
            <i class="fa fa-github"></i>
        </a>
        <a target="_blank"  href="/rss.xml">
            <i class="fa fa-rss"></i>
        </a>
    </div>
</div>
                </div>
            </div>
        </div>
    </div>
</div>

                <div class="col l12 m12 s12  mobile sidebar-item hide-on-med-and-down">
    <div class="row">

        <div class="col m12 s12 l12 offset-s1 offset-m1  offset-l1  wow fadeIn a2" data-wow-delay="0.2s" >
            <div class="section-item-details">
                <div class="aboutMe">
                    <h4><a href="/about">Pinal Bhatt</a></h4> <!-- Number -->
                    <span>Software Engineer <br/><i>always on learning ramp</i></span>
                </div>
                <div class="work">
    <div class="social1">
        <a target="_blank"  href="http://twitter.com/PBDesk">
            <i class="fa fa-twitter"></i>
        </a>
        <a target="_blank"  href="https://www.facebook.com/Go.PBDesk">
            <i class="fa fa-facebook"></i>
        </a>
        <a target="_blank"  href="https://plus.google.com/+Pbdesk">
            <i class="fa fa-google-plus"></i>
        </a>
        <a target="_blank"  href="http://www.linkedin.com/in/pinalbhatt">
            <i class="fa fa-linkedin"></i>
        </a>
        <a target="_blank"  href="https://github.com/PBDesk">
            <i class="fa fa-github"></i>
        </a>
        <a target="_blank"  href="/rss.xml">
            <i class="fa fa-rss"></i>
        </a>
    </div>
</div>
            </div>
        </div>
    </div>
</div>

                <div class="col l12 m12 s12 sidebar-item hide-on-med-and-down">
    <div class="row">
        <div class="col m12 s12 l3 icon">
            <i class="fa fa-file-text-o"></i> <!-- icon -->
        </div>
        <div class="col m12 s12 l9 info wow fadeIn a2" data-wow-delay="0.2s" style="border-bottom: none !important;" >
            <div class="section-item-details">
                <div class="personal">
                    <h4><a href="/blog">My Posts</a></h4> <!-- Number -->
                </div>
            </div>
        </div>
        <div class="col m12 s12 l3 icon">
            <i class="fa fa-file-code-o"></i> <!-- icon -->
        </div>
        <div class="col m12 s12 l9 info wow fadeIn a2" data-wow-delay="0.2s"  style="border-bottom: none !important;">
            <div class="section-item-details">
                <div class="personal">
                    <h4><a href="/gists">Gists</a></h4> <!-- Number -->
                </div>
            </div>
        </div>
        <div class="col m12 s12 l3 icon">
            <i class="fa fa-book"></i> <!-- icon -->
        </div>
        <div class="col m12 s12 l9 info wow fadeIn a2" data-wow-delay="0.2s"  style="border-bottom: none !important;">
            <div class="section-item-details">
                <div class="personal">
                    <h4><a href="/ebooks">eBooks</a></h4> <!-- Number -->
                </div>
            </div>
        </div>
        <div class="col m12 s12 l3 icon">
            <i class="fa fa-laptop"></i> <!-- icon -->
        </div>
        <div class="col m12 s12 l9 info wow fadeIn a2" data-wow-delay="0.2s" >
            <div class="section-item-details">
                <div class="personal">
                    <h4><a href="/tutorials">Tutorials</a></h4> <!-- Number -->
                </div>
            </div>
        </div>
    </div>
</div>

                <div class="col l12 m12 s12  sidebar-item hide-on-med-and-down">
    <div class="row">
        <div class="col m12 s12 l3 icon">
            <i class="fa fa-user"></i> <!-- icon -->
        </div>
        <div class="col m12 s12 l9 info wow fadeIn a2" data-wow-delay="0.2s" style="border-bottom: none !important;" >
            <div class="section-item-details">
                <div class="personal">
                    <h4><a href="/about">About Me</a></h4> <!-- Number -->
                </div>
            </div>
        </div>
        <div class="col m12 s12 l3 icon">
            <i class="fa fa-send"></i> <!-- icon -->
        </div>
        <div class="col m12 s12 l9 info wow fadeIn a2" data-wow-delay="0.2s"  style="border-bottom: none !important;">
            <div class="section-item-details">
                <div class="personal">
                    <h4><a href="/about/contact-me">Contact Me</a></h4> <!-- Number -->
                </div>
            </div>
        </div>
        <div class="col m12 s12 l3 icon">
            <i class="fa fa-rss-square"></i> <!-- icon -->
        </div>
        <div class="col m12 s12 l9 info wow fadeIn a2" data-wow-delay="0.2s" >
            <div class="section-item-details">
                <div class="personal">
                    <h4><a href="/rss">Subscribe Rss</a></h4> <!-- Number -->
                </div>
            </div>
        </div>
    </div>
</div>
                <!-- SKILLS -->
                <div class="col l12 m12 s12  skills sidebar-item sidebar-item hide-on-med-and-down" >
                    <div class="row">
                        <div class="col m12 l3 s12 icon">
                            <i class="fa fa-calendar-o"></i> <!-- icon -->
                        </div>
                        <!-- Skills -->
                        <div class="col m12 l9 s12 skill-line a5 wow fadeIn" data-wow-delay="0.5s">
                            <h3>Featured </h3>
                            
                            

                        </div>
                    </div>
                </div>


            </div>
            <div class="row">
                <div class="col l12 m12 s12 hide-on-med-and-down" style="background-color: #fff">
                    <!-- 120x240, created 12/19/07 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:120px;height:240px"
     data-ad-client="ca-pub-4686631795727964"
     data-ad-slot="9327659222"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
                </div>
            </div>
            <div class="row">
                <div class="col l12 m12 s12 hide-on-med-and-down" style="background-color: #fff">
                    <!-- 120x240, created 12/19/07 -->
<ins class="adsbygoogle"
     style="display:inline-block;width:120px;height:240px"
     data-ad-client="ca-pub-4686631795727964"
     data-ad-slot="9327659222"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
                </div>
            </div>
        </aside>
        <section class="col s12 m12 l8 section">
            <div class="row">
                <div class="section-wrapper z-depth-1">
  <div class="custom-content col s12 m12 l12 wow fadeIn a1 breadcrumbDiv" data-wow-delay="0.1s" >

    <div class="col s12 ">
      <a href="#!" class="breadcrumb">Home</a>
      <a href="#!" class="breadcrumb">Second</a>
      <div  class="breadcrumb">SiteMap</div>
    </div>

  </div>
  <div class="section-icon col s12 m12 l2 hide-on-med-and-down">
    <i class="fa fa-file-text-o"></i>
  </div>
    <article class="post" itemscope itemtype="http://schema.org/BlogPosting">


  <div class="custom-content col s12 m12 l10 wow fadeIn a1" data-wow-delay="0.1s" >
      <div class="post-meta-cat"><span><a class="a-c" href="/tag/blog">blog</a> </span><span><a class="a-c" href="/tag/Asp.Net">Asp.Net</a> </span><span><a class="a-c" href="/tag/CMS">CMS</a> </span></div>
    <h2 style="margin-top:10px">Razor support in Umbraco 4.7 </h2>

    <div class="custom-content-wrapper wow fadeIn a2" data-wow-delay="0.2s" >
      <span><time datetime="2011-03-07T11:49:00-05:00" itemprop="datePublished">Mar 7, 2011</time> </span>
        <div class="post-meta-tag"><i class="fa fa-tags"></i> </div>
    </div>
    <div class="custom-content-wrapper wow fadeIn a3" data-wow-delay="0.3s" >

        <p align="justify">With Umbraco 4.6.1 in Jan,2011, they brought in one of the great feature to Umbraco CMS - <strong>Razor</strong>. And with Umbraco 4.7 in March, 2011 they have matured the made it more usable, reliable and stable. </p>
<p align="justify">Razor is the view engine introduced by Microsoft team with ASP.Net MVC 3.0. It is optimized around HTML generation using a code-focused templating approach. And now Umbraco 4.7 provides excellent support for writing Razor scripts to create macros in umbraco. For those guys, including me, who dislike XSLTs, this is a great alternate for them.&#160; Now we can write the logic in C# or VB rather then in XSLT. Thanks Umbraco Team!!!. </p>
<p align="justify">In one of my pervious <a href="http://blog.pbdesk.com/2011/01/razor-support-in-umbraco.html">post</a>, I mentioned about using Razor scripts in Umbraco 4.6.1. You can consider this as an extension to that. In this post I have tried to describe what has changed from 4.6.1 to 4.7 and how to use Razors in Umbraco 4.7. </p>
<h2>Upgrading from 4.6.1 to 4.7</h2>
<p> 
<p><em>(Please note that 4.7 requires .Net Frameowork 4.0)</em></p>
<ol>
<li>Copy following folders from 4.7RC download: /bin, /umbraco and /umbraco_client. </li>
<li>Take care of web.config changes: Mainly there are 4 changes and they're clearly marked in the web.config in 4.7 as &lt;!-- Added in Umbraco 4.6.2 –&gt;. </li>
<li>Delete following .dll files from old installation under /bin folder      <br /><em>IronPython.dll          <br />IronPython.Modules.dll           <br />IronRuby.dll           <br />IronRuby.Libraries.dll           <br />IronRuby.Libraries.Yaml.dll           <br />Microsoft.Dynamic.dll           <br />Microsoft.Scripting.dll           <br />Microsoft.Scripting.Debugging.dll           <br /></em>Also delete following files if they exist. (in case if you have 4.7 beta)       <br /><em>RazorEngine.Core.dll          <br />RazorEngine.Templates.dll           <br />umbraco.MacroEngines.Legacy.dll           <br /></em></li>
<li>In 4.6.1, by default Razor scripts were saved in ~/python folder, where as in 4.7 default folder has changed to <strong>~/macroScripts</strong>. So if you have any .razor files under ~/python, you need to <u>move them to ~/macroScripts folder.</u> </li>
</ol>
<p>For general upgrade information follow the guide found at <a href="http://our.umbraco.org/wiki/install-and-setup/upgrading-an-umbraco-installation" target="_blank">http://our.umbraco.org/wiki/install-and-setup/upgrading-an-umbraco-installation</a>     <br />And here is one important thread from Umbraco Installation Forum which might be helpful: <a href="http://our.umbraco.org/forum/getting-started/installing-umbraco/17890-XSLT-macros-not-getting-rendered-after-upgrading-to-47-RC" target="_blank">http://our.umbraco.org/forum/getting-started/installing-umbraco/17890-XSLT-macros-not-getting-rendered-after-upgrading-to-47-RC</a></p>
<li>
<h2>Changes in Umbraco 4.7 </h2>
<ol>
<li>As mentioned above, now with 4.7 all razor scripts are to be saved in <strong>~/macroScripts</strong> folder. </li>
<li>Now the new razor script files will have extension of .cshtml or .vbhtml. In 4.6.1 razor script files were having .razor extension and only C# was supported. <u>Old .razor files will still work in 4.7</u> as far as they are in ~/macroScripts. But now new script files created will have extension .cshtml (for C#) and .vbhtml (for VB) </li>
<li>Now you cannot use single-statement in control-flow statements without&#160; {} block. ie. Any thing under control flow statements like if, for, while, foreach need to be in between&#160;&#160; {}&#160; block.&#160; For example, the following <u>is not</u> allowed: </li>
</ol>
<div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px">
<div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">
<pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: white; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">@<span style="color: #0000ff">if</span>(isLoggedIn) </pre>
<p><!--CRLF--></p>
<pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">Hello, @user </pre>
<p><!--CRLF--></div>
</p></div>
<blockquote>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Instead, wrap the contents of the block in &quot;{}&quot;: </p>
</blockquote>
<div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px">
<div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">
<pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: white; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">@<span style="color: #0000ff">if</span>(isLoggedIn) { </pre>
<p><!--CRLF--></p>
<pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">Hello, @user</pre>
<p><!--CRLF--></p>
<pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: white; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">} </pre>
<p><!--CRLF--></div>
</p></div>
<h2>New Features in Umbraco 4.7 </h2>
<ol>
<li>
<div align="justify">One of the Major new feature in 4.7 is support for Macro Parameters in razor scripts. Yes now razor script can read parameters passed by macros using <strong>@Parameter.nameOfParameter</strong> syntax. </p>
<p></div>
</li>
<li>
<div align="justify">For proper randering, document type properties with html contents in them needs to be wrapped in Html.Raw() ie. @Html.Raw(Model.bodyText). Leaving this wrapper off will cause HTML to be encoded and render to the screen.<br />
        </div>
</li>
<li>
<div align="justify">IronPython and IronRuby is now not a part of the distribution and needs to be installed by unzipping the contents of the separate macroengine download. So if you are not using these Iron* scripts, you can remove ~/python folder.<br />
        </div>
</li>
<li>
<div align="justify">For technical changes (Programmers perspective) please refer to the serise of blogs at umbraco.com: </div>
</li>
</ol>
<ul>
    </ul>
<ul>
<li><a href="http://umbraco.com/follow-us/blog-archive/2011/2/23/umbraco-47-razor-feature-walkthrough-%E2%80%93-part-1" target="_blank">Umbraco 4.7 Razor Feature Walkthrough – Part 1</a> </li>
<li><a href="http://umbraco.com/follow-us/blog-archive/2011/2/24/umbraco-47-razor-feature-walkthrough-%E2%80%93-part-2" target="_blank">Umbraco 4.7 Razor Feature Walkthrough – Part 2</a> </li>
<li><a href="http://umbraco.com/follow-us/blog-archive/2011/2/28/umbraco-razor-feature-walkthrough-%E2%80%93-part-3" target="_blank">Umbraco Razor Feature Walkthrough – Part 3</a> </li>
<li><a href="http://umbraco.com/follow-us/blog-archive/2011/3/1/umbraco-razor-feature-walkthrough-%E2%80%93-part-4" target="_blank">Umbraco Razor Feature Walkthrough – Part 4</a> </li>
</ul></p>
</li>

    </div>

  </div>
    </article>
</div>

<section class="col s12 m12 l8 section">
  <div class="row">

  </div>
</section>
<!--<article class="post" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header" data-spy="affix" data-offset-top="25">
    <h1 class="post-title"  itemprop="name headline">Razor support in Umbraco 4.7</h1>
    <p class="post-meta"><time datetime="2011-03-07T11:49:00-05:00" itemprop="datePublished">Mar 7, 2011</time> • <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name">{"login"=>"pbadmin", "email"=>"pinalbhatt@gmail.com", "display_name"=>"PBDesk Admin", "first_name"=>"Pinal", "last_name"=>"Bhatt"}</span></span></p>
      <p class="post-meta"><span><a href="/tag/blog">blog</a> </span><span><a href="/tag/Asp.Net">Asp.Net</a> </span><span><a href="/tag/CMS">CMS</a> </span></p>
    <p class="post-meta"></p>
  </header>

  <div class="post-content" itemprop="articleBody">
    <p align="justify">With Umbraco 4.6.1 in Jan,2011, they brought in one of the great feature to Umbraco CMS - <strong>Razor</strong>. And with Umbraco 4.7 in March, 2011 they have matured the made it more usable, reliable and stable. </p>
<p align="justify">Razor is the view engine introduced by Microsoft team with ASP.Net MVC 3.0. It is optimized around HTML generation using a code-focused templating approach. And now Umbraco 4.7 provides excellent support for writing Razor scripts to create macros in umbraco. For those guys, including me, who dislike XSLTs, this is a great alternate for them.&#160; Now we can write the logic in C# or VB rather then in XSLT. Thanks Umbraco Team!!!. </p>
<p align="justify">In one of my pervious <a href="http://blog.pbdesk.com/2011/01/razor-support-in-umbraco.html">post</a>, I mentioned about using Razor scripts in Umbraco 4.6.1. You can consider this as an extension to that. In this post I have tried to describe what has changed from 4.6.1 to 4.7 and how to use Razors in Umbraco 4.7. </p>
<h2>Upgrading from 4.6.1 to 4.7</h2>
<p> 
<p><em>(Please note that 4.7 requires .Net Frameowork 4.0)</em></p>
<ol>
<li>Copy following folders from 4.7RC download: /bin, /umbraco and /umbraco_client. </li>
<li>Take care of web.config changes: Mainly there are 4 changes and they're clearly marked in the web.config in 4.7 as &lt;!-- Added in Umbraco 4.6.2 –&gt;. </li>
<li>Delete following .dll files from old installation under /bin folder      <br /><em>IronPython.dll          <br />IronPython.Modules.dll           <br />IronRuby.dll           <br />IronRuby.Libraries.dll           <br />IronRuby.Libraries.Yaml.dll           <br />Microsoft.Dynamic.dll           <br />Microsoft.Scripting.dll           <br />Microsoft.Scripting.Debugging.dll           <br /></em>Also delete following files if they exist. (in case if you have 4.7 beta)       <br /><em>RazorEngine.Core.dll          <br />RazorEngine.Templates.dll           <br />umbraco.MacroEngines.Legacy.dll           <br /></em></li>
<li>In 4.6.1, by default Razor scripts were saved in ~/python folder, where as in 4.7 default folder has changed to <strong>~/macroScripts</strong>. So if you have any .razor files under ~/python, you need to <u>move them to ~/macroScripts folder.</u> </li>
</ol>
<p>For general upgrade information follow the guide found at <a href="http://our.umbraco.org/wiki/install-and-setup/upgrading-an-umbraco-installation" target="_blank">http://our.umbraco.org/wiki/install-and-setup/upgrading-an-umbraco-installation</a>     <br />And here is one important thread from Umbraco Installation Forum which might be helpful: <a href="http://our.umbraco.org/forum/getting-started/installing-umbraco/17890-XSLT-macros-not-getting-rendered-after-upgrading-to-47-RC" target="_blank">http://our.umbraco.org/forum/getting-started/installing-umbraco/17890-XSLT-macros-not-getting-rendered-after-upgrading-to-47-RC</a></p>
<li>
<h2>Changes in Umbraco 4.7 </h2>
<ol>
<li>As mentioned above, now with 4.7 all razor scripts are to be saved in <strong>~/macroScripts</strong> folder. </li>
<li>Now the new razor script files will have extension of .cshtml or .vbhtml. In 4.6.1 razor script files were having .razor extension and only C# was supported. <u>Old .razor files will still work in 4.7</u> as far as they are in ~/macroScripts. But now new script files created will have extension .cshtml (for C#) and .vbhtml (for VB) </li>
<li>Now you cannot use single-statement in control-flow statements without&#160; {} block. ie. Any thing under control flow statements like if, for, while, foreach need to be in between&#160;&#160; {}&#160; block.&#160; For example, the following <u>is not</u> allowed: </li>
</ol>
<div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px">
<div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">
<pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: white; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">@<span style="color: #0000ff">if</span>(isLoggedIn) </pre>
<p><!--CRLF--></p>
<pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">Hello, @user </pre>
<p><!--CRLF--></div>
</p></div>
<blockquote>
<p>&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160; Instead, wrap the contents of the block in &quot;{}&quot;: </p>
</blockquote>
<div style="border-bottom: silver 1px solid; text-align: left; border-left: silver 1px solid; padding-bottom: 4px; line-height: 12pt; background-color: #f4f4f4; margin: 20px 0px 10px; padding-left: 4px; width: 97.5%; padding-right: 4px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; max-height: 200px; font-size: 8pt; overflow: auto; border-top: silver 1px solid; cursor: text; border-right: silver 1px solid; padding-top: 4px">
<div style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">
<pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: white; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">@<span style="color: #0000ff">if</span>(isLoggedIn) { </pre>
<p><!--CRLF--></p>
<pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: #f4f4f4; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">Hello, @user</pre>
<p><!--CRLF--></p>
<pre style="border-bottom-style: none; text-align: left; padding-bottom: 0px; line-height: 12pt; border-right-style: none; background-color: white; margin: 0em; padding-left: 0px; width: 100%; padding-right: 0px; font-family: &#39;Courier New&#39;, courier, monospace; direction: ltr; border-top-style: none; color: black; font-size: 8pt; border-left-style: none; overflow: visible; padding-top: 0px">} </pre>
<p><!--CRLF--></div>
</p></div>
<h2>New Features in Umbraco 4.7 </h2>
<ol>
<li>
<div align="justify">One of the Major new feature in 4.7 is support for Macro Parameters in razor scripts. Yes now razor script can read parameters passed by macros using <strong>@Parameter.nameOfParameter</strong> syntax. </p>
<p></div>
</li>
<li>
<div align="justify">For proper randering, document type properties with html contents in them needs to be wrapped in Html.Raw() ie. @Html.Raw(Model.bodyText). Leaving this wrapper off will cause HTML to be encoded and render to the screen.<br />
        </div>
</li>
<li>
<div align="justify">IronPython and IronRuby is now not a part of the distribution and needs to be installed by unzipping the contents of the separate macroengine download. So if you are not using these Iron* scripts, you can remove ~/python folder.<br />
        </div>
</li>
<li>
<div align="justify">For technical changes (Programmers perspective) please refer to the serise of blogs at umbraco.com: </div>
</li>
</ol>
<ul>
    </ul>
<ul>
<li><a href="http://umbraco.com/follow-us/blog-archive/2011/2/23/umbraco-47-razor-feature-walkthrough-%E2%80%93-part-1" target="_blank">Umbraco 4.7 Razor Feature Walkthrough – Part 1</a> </li>
<li><a href="http://umbraco.com/follow-us/blog-archive/2011/2/24/umbraco-47-razor-feature-walkthrough-%E2%80%93-part-2" target="_blank">Umbraco 4.7 Razor Feature Walkthrough – Part 2</a> </li>
<li><a href="http://umbraco.com/follow-us/blog-archive/2011/2/28/umbraco-razor-feature-walkthrough-%E2%80%93-part-3" target="_blank">Umbraco Razor Feature Walkthrough – Part 3</a> </li>
<li><a href="http://umbraco.com/follow-us/blog-archive/2011/3/1/umbraco-razor-feature-walkthrough-%E2%80%93-part-4" target="_blank">Umbraco Razor Feature Walkthrough – Part 4</a> </li>
</ul></p>
</li>

  </div>

</article>-->

                <div class="section-wrapper z-depth-1 wow fadeIn" style="max-height: 300px" data-wow-delay="0.1s">
    <div class="col s12 m12 l12 website right" >
        <div class="row">
            <div class="col s12 m12 l12">
                <!-- PBDesk2016-Responsive1 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4686631795727964"
     data-ad-slot="5279982745"
     data-ad-format="auto"></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>
            </div>

        </div>
    </div>
</div>
                <div class="section-wrapper z-depth-1 wow fadeIn" data-wow-delay="0.1s">
    <div class="col s12 m12 l10 website right" >
        <div class="row">
            <div class="col s12 m12 l12">
                <footer>
                <!--<span><a class="a-c" href="/">Home</a></span> | <span><a href="">SiteMap</a></span> | <span><a href="">Disclaimer</a></span>-->
                    <ul id="footer-menu">
                        <li><a href="/"> Home</a></li>
                        <li><a href="/about/SiteMap"> SiteMap</a></li>
                        <li><a href="/about/Disclaimer"> Disclaimer</a></li>
                    </ul>
                <div class="fpadd">Pinal Bhatt's Blog © 2016 | PBDesk.com</div>
                <div class="fpadd">Concept Design, Develop & Perceived by Pinal Bhatt.</div>
                </footer>
            </div>

        </div>
    </div>
</div>
            </div>
        </section>
    </div>
</div>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.2.0/jquery.min.js"></script>
<script src='//cdnjs.cloudflare.com/ajax/libs/materialize/0.97.5/js/materialize.min.js'></script>
<script src="/assets/material/js/wow.min.js"></script>
<script src="/assets/material/js/masonry.pkgd.js"></script>
<script src="/assets/material/js/validator.min.js"></script>
<script src="/assets/material/js/init.js"></script>
<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-9753249-7', 'auto');
    ga('send', 'pageview');

</script>
</body>
</html>

